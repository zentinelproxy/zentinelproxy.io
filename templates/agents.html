{% extends "base.html" %}

{% block title %}{{ section.title }} | {{ config.title }}{% endblock %}

{% block content %}
<div class="page-header">
    <div class="container">
        <h1>{{ section.title }}</h1>
        <p>{{ section.description }}</p>
    </div>
</div>

<section class="agents-section">
    <div class="container">
        {# Search bar #}
        <div class="agents-search">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
            <input type="text" id="agent-search" placeholder="Search agents..." autocomplete="off">
        </div>

        {# Separate official and community agents #}
        {% set official_agents = section.pages | filter(attribute="extra.official", value=true) %}
        {% set community_agents = section.pages | filter(attribute="extra.official", value=false) | sort(attribute="title") %}

        {# Sort official agents by status: Stable first, then Beta, then Planned #}
        {% set stable_agents = official_agents | filter(attribute="extra.status", value="Stable") %}
        {% set beta_agents = official_agents | filter(attribute="extra.status", value="Beta") %}
        {% set planned_agents = official_agents | filter(attribute="extra.status", value="Planned") %}

        {# Official Agents #}
        {% if official_agents %}
        <details class="agents-category" open>
            <summary class="category-header">
                <div class="category-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>
                    <h2>Official Agents</h2>
                </div>
                <div class="category-meta">
                    <span class="agent-count">{{ official_agents | length }} agents</span>
                    <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
                </div>
            </summary>
            <p class="category-description">Maintained by the Sentinel Core Team</p>
            <div class="agents-grid">
                {# Iterate in order: Stable, Beta, Planned #}
                {% for agent in stable_agents %}
                <article class="agent-card agent-official" data-agent-name="{{ agent.title | lower }}" data-agent-description="{{ agent.description | default(value='') | lower }}" data-agent-tags="{% if agent.taxonomies.tags %}{{ agent.taxonomies.tags | join(sep=' ') | lower }}{% endif %}">
                    <div class="agent-header">
                        <div class="agent-info">
                            <h3 class="agent-name">
                                <a href="{{ agent.permalink | safe }}">{{ agent.title }}</a>
                            </h3>
                            {% if agent.extra.author %}
                            <p class="agent-author">by {{ agent.extra.author }}</p>
                            {% endif %}
                        </div>
                        <div class="agent-header-right">
                            {% if agent.extra.version %}
                            <span class="agent-version">v{{ agent.extra.version }}</span>
                            {% endif %}
                            {% if agent.extra.status %}
                            <span class="agent-status {{ agent.extra.status | lower }}">{{ agent.extra.status }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="agent-description">{{ agent.description | default(value="No description available.") }}</p>

                    {# Install methods badges #}
                    {% if agent.extra.crate_name or agent.extra.docker_image %}
                    <div class="agent-install-badges">
                        {% if agent.extra.crate_name %}
                        <span class="install-badge cargo" title="cargo install {{ agent.extra.crate_name }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linejoin="round" stroke-width="1"><path stroke-linecap="round" d="M1.5 7L8 10.5L14.5 7m-10-2.5l3.503 2L14.498 3M4.5 5.5v7m3.5-6V14"/><path stroke-linecap="round" d="M8.003 3L11.5 4.5v8"/><path stroke-linecap="square" d="M1.5 6.984V11l6.503 3.5L14.5 11V3L11 1.5l-6.5 3v1z"/></g></svg>
                            Cargo
                        </span>
                        {% endif %}
                        {% if agent.extra.docker_image %}
                        <span class="install-badge docker" title="docker pull {{ agent.extra.docker_image }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M13.152.682a2.25 2.25 0 0 1 2.269 0l.007.004l6.957 4.276a2.28 2.28 0 0 1 1.126 1.964v7.516c0 .81-.432 1.56-1.133 1.968l-.002.001l-11.964 7.037l-.004.003c-.706.41-1.578.41-2.284 0l-.026-.015l-6.503-4.502a2.27 2.27 0 0 1-1.096-1.943V9.438c0-.392.1-.77.284-1.1l.003-.006l.014-.026c.197-.342.48-.627.82-.827h.002L13.152.681Zm.757 1.295h-.001L2.648 8.616l6.248 4.247a.78.78 0 0 0 .758-.01h.001l11.633-6.804l-6.629-4.074a.75.75 0 0 0-.75.003ZM8.517 14.33a2.3 2.3 0 0 1-.393-.18l-.023-.014l-6.102-4.147v7.003c0 .275.145.528.379.664l.025.014l6.114 4.232zM18 9.709l-3.25 1.9v7.548L18 17.245Zm-7.59 4.438l-.002.002a2.3 2.3 0 0 1-.391.18v7.612l3.233-1.902v-7.552Zm9.09-5.316v7.532l2.124-1.25a.78.78 0 0 0 .387-.671V7.363Z"/></svg>
                            OCI
                        </span>
                        {% endif %}
                    </div>
                    {% endif %}

                    {% if agent.taxonomies.tags %}
                    <div class="agent-tags">
                        {% for tag in agent.taxonomies.tags %}
                        <span class="agent-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </article>
                {% endfor %}
                {% for agent in beta_agents %}
                <article class="agent-card agent-official" data-agent-name="{{ agent.title | lower }}" data-agent-description="{{ agent.description | default(value='') | lower }}" data-agent-tags="{% if agent.taxonomies.tags %}{{ agent.taxonomies.tags | join(sep=' ') | lower }}{% endif %}">
                    <div class="agent-header">
                        <div class="agent-info">
                            <h3 class="agent-name">
                                <a href="{{ agent.permalink | safe }}">{{ agent.title }}</a>
                            </h3>
                            {% if agent.extra.author %}
                            <p class="agent-author">by {{ agent.extra.author }}</p>
                            {% endif %}
                        </div>
                        <div class="agent-header-right">
                            {% if agent.extra.version %}
                            <span class="agent-version">v{{ agent.extra.version }}</span>
                            {% endif %}
                            {% if agent.extra.status %}
                            <span class="agent-status {{ agent.extra.status | lower }}">{{ agent.extra.status }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="agent-description">{{ agent.description | default(value="No description available.") }}</p>

                    {# Install methods badges #}
                    {% if agent.extra.crate_name or agent.extra.docker_image %}
                    <div class="agent-install-badges">
                        {% if agent.extra.crate_name %}
                        <span class="install-badge cargo" title="cargo install {{ agent.extra.crate_name }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linejoin="round" stroke-width="1"><path stroke-linecap="round" d="M1.5 7L8 10.5L14.5 7m-10-2.5l3.503 2L14.498 3M4.5 5.5v7m3.5-6V14"/><path stroke-linecap="round" d="M8.003 3L11.5 4.5v8"/><path stroke-linecap="square" d="M1.5 6.984V11l6.503 3.5L14.5 11V3L11 1.5l-6.5 3v1z"/></g></svg>
                            Cargo
                        </span>
                        {% endif %}
                        {% if agent.extra.docker_image %}
                        <span class="install-badge docker" title="docker pull {{ agent.extra.docker_image }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M13.152.682a2.25 2.25 0 0 1 2.269 0l.007.004l6.957 4.276a2.28 2.28 0 0 1 1.126 1.964v7.516c0 .81-.432 1.56-1.133 1.968l-.002.001l-11.964 7.037l-.004.003c-.706.41-1.578.41-2.284 0l-.026-.015l-6.503-4.502a2.27 2.27 0 0 1-1.096-1.943V9.438c0-.392.1-.77.284-1.1l.003-.006l.014-.026c.197-.342.48-.627.82-.827h.002L13.152.681Zm.757 1.295h-.001L2.648 8.616l6.248 4.247a.78.78 0 0 0 .758-.01h.001l11.633-6.804l-6.629-4.074a.75.75 0 0 0-.75.003ZM8.517 14.33a2.3 2.3 0 0 1-.393-.18l-.023-.014l-6.102-4.147v7.003c0 .275.145.528.379.664l.025.014l6.114 4.232zM18 9.709l-3.25 1.9v7.548L18 17.245Zm-7.59 4.438l-.002.002a2.3 2.3 0 0 1-.391.18v7.612l3.233-1.902v-7.552Zm9.09-5.316v7.532l2.124-1.25a.78.78 0 0 0 .387-.671V7.363Z"/></svg>
                            OCI
                        </span>
                        {% endif %}
                    </div>
                    {% endif %}

                    {% if agent.taxonomies.tags %}
                    <div class="agent-tags">
                        {% for tag in agent.taxonomies.tags %}
                        <span class="agent-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </article>
                {% endfor %}
                {% for agent in planned_agents %}
                <article class="agent-card agent-official" data-agent-name="{{ agent.title | lower }}" data-agent-description="{{ agent.description | default(value='') | lower }}" data-agent-tags="{% if agent.taxonomies.tags %}{{ agent.taxonomies.tags | join(sep=' ') | lower }}{% endif %}">
                    <div class="agent-header">
                        <div class="agent-info">
                            <h3 class="agent-name">
                                <a href="{{ agent.permalink | safe }}">{{ agent.title }}</a>
                            </h3>
                            {% if agent.extra.author %}
                            <p class="agent-author">by {{ agent.extra.author }}</p>
                            {% endif %}
                        </div>
                        <div class="agent-header-right">
                            {% if agent.extra.version %}
                            <span class="agent-version">v{{ agent.extra.version }}</span>
                            {% endif %}
                            {% if agent.extra.status %}
                            <span class="agent-status {{ agent.extra.status | lower }}">{{ agent.extra.status }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="agent-description">{{ agent.description | default(value="No description available.") }}</p>

                    {# Install methods badges #}
                    {% if agent.extra.crate_name or agent.extra.docker_image %}
                    <div class="agent-install-badges">
                        {% if agent.extra.crate_name %}
                        <span class="install-badge cargo" title="cargo install {{ agent.extra.crate_name }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linejoin="round" stroke-width="1"><path stroke-linecap="round" d="M1.5 7L8 10.5L14.5 7m-10-2.5l3.503 2L14.498 3M4.5 5.5v7m3.5-6V14"/><path stroke-linecap="round" d="M8.003 3L11.5 4.5v8"/><path stroke-linecap="square" d="M1.5 6.984V11l6.503 3.5L14.5 11V3L11 1.5l-6.5 3v1z"/></g></svg>
                            Cargo
                        </span>
                        {% endif %}
                        {% if agent.extra.docker_image %}
                        <span class="install-badge docker" title="docker pull {{ agent.extra.docker_image }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M13.152.682a2.25 2.25 0 0 1 2.269 0l.007.004l6.957 4.276a2.28 2.28 0 0 1 1.126 1.964v7.516c0 .81-.432 1.56-1.133 1.968l-.002.001l-11.964 7.037l-.004.003c-.706.41-1.578.41-2.284 0l-.026-.015l-6.503-4.502a2.27 2.27 0 0 1-1.096-1.943V9.438c0-.392.1-.77.284-1.1l.003-.006l.014-.026c.197-.342.48-.627.82-.827h.002L13.152.681Zm.757 1.295h-.001L2.648 8.616l6.248 4.247a.78.78 0 0 0 .758-.01h.001l11.633-6.804l-6.629-4.074a.75.75 0 0 0-.75.003ZM8.517 14.33a2.3 2.3 0 0 1-.393-.18l-.023-.014l-6.102-4.147v7.003c0 .275.145.528.379.664l.025.014l6.114 4.232zM18 9.709l-3.25 1.9v7.548L18 17.245Zm-7.59 4.438l-.002.002a2.3 2.3 0 0 1-.391.18v7.612l3.233-1.902v-7.552Zm9.09-5.316v7.532l2.124-1.25a.78.78 0 0 0 .387-.671V7.363Z"/></svg>
                            OCI
                        </span>
                        {% endif %}
                    </div>
                    {% endif %}

                    {% if agent.taxonomies.tags %}
                    <div class="agent-tags">
                        {% for tag in agent.taxonomies.tags %}
                        <span class="agent-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </article>
                {% endfor %}
            </div>
        </details>
        {% endif %}

        {# Community Agents #}
        <details class="agents-category" open>
            <summary class="category-header">
                <div class="category-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <h2>Community Agents</h2>
                </div>
                <div class="category-meta">
                    <span class="agent-count">{{ community_agents | length }} agents</span>
                    <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
                </div>
            </summary>
            <p class="category-description">Built and maintained by the community</p>
            <div class="agents-grid">
                {% for agent in community_agents %}
                <article class="agent-card" data-agent-name="{{ agent.title | lower }}" data-agent-description="{{ agent.description | default(value='') | lower }}" data-agent-tags="{% if agent.taxonomies.tags %}{{ agent.taxonomies.tags | join(sep=' ') | lower }}{% endif %}">
                    <div class="agent-header">
                        <div class="agent-info">
                            <h3 class="agent-name">
                                <a href="{{ agent.permalink | safe }}">{{ agent.title }}</a>
                            </h3>
                            {% if agent.extra.author %}
                            <p class="agent-author">by {{ agent.extra.author }}</p>
                            {% endif %}
                        </div>
                        <div class="agent-header-right">
                            {% if agent.extra.version %}
                            <span class="agent-version">v{{ agent.extra.version }}</span>
                            {% endif %}
                            {% if agent.extra.status %}
                            <span class="agent-status {{ agent.extra.status | lower }}">{{ agent.extra.status }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <p class="agent-description">{{ agent.description | default(value="No description available.") }}</p>

                    {# Install methods badges #}
                    {% if agent.extra.crate_name or agent.extra.docker_image %}
                    <div class="agent-install-badges">
                        {% if agent.extra.crate_name %}
                        <span class="install-badge cargo" title="cargo install {{ agent.extra.crate_name }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linejoin="round" stroke-width="1"><path stroke-linecap="round" d="M1.5 7L8 10.5L14.5 7m-10-2.5l3.503 2L14.498 3M4.5 5.5v7m3.5-6V14"/><path stroke-linecap="round" d="M8.003 3L11.5 4.5v8"/><path stroke-linecap="square" d="M1.5 6.984V11l6.503 3.5L14.5 11V3L11 1.5l-6.5 3v1z"/></g></svg>
                            Cargo
                        </span>
                        {% endif %}
                        {% if agent.extra.docker_image %}
                        <span class="install-badge docker" title="docker pull {{ agent.extra.docker_image }}">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="currentColor" d="M13.152.682a2.25 2.25 0 0 1 2.269 0l.007.004l6.957 4.276a2.28 2.28 0 0 1 1.126 1.964v7.516c0 .81-.432 1.56-1.133 1.968l-.002.001l-11.964 7.037l-.004.003c-.706.41-1.578.41-2.284 0l-.026-.015l-6.503-4.502a2.27 2.27 0 0 1-1.096-1.943V9.438c0-.392.1-.77.284-1.1l.003-.006l.014-.026c.197-.342.48-.627.82-.827h.002L13.152.681Zm.757 1.295h-.001L2.648 8.616l6.248 4.247a.78.78 0 0 0 .758-.01h.001l11.633-6.804l-6.629-4.074a.75.75 0 0 0-.75.003ZM8.517 14.33a2.3 2.3 0 0 1-.393-.18l-.023-.014l-6.102-4.147v7.003c0 .275.145.528.379.664l.025.014l6.114 4.232zM18 9.709l-3.25 1.9v7.548L18 17.245Zm-7.59 4.438l-.002.002a2.3 2.3 0 0 1-.391.18v7.612l3.233-1.902v-7.552Zm9.09-5.316v7.532l2.124-1.25a.78.78 0 0 0 .387-.671V7.363Z"/></svg>
                            OCI
                        </span>
                        {% endif %}
                    </div>
                    {% endif %}

                    {% if agent.taxonomies.tags %}
                    <div class="agent-tags">
                        {% for tag in agent.taxonomies.tags %}
                        <span class="agent-tag">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </article>
                {% endfor %}

                {# Submit Your Agent placeholder card #}
                <article class="agent-card agent-card-submit">
                    <div class="submit-card-content">
                        <div class="submit-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                        </div>
                        <h3 class="agent-name">Submit Your Agent</h3>
                        <p class="agent-description">Built something useful? Share it with the community and get it listed here.</p>
                        <a href="https://github.com/raskell-io/sentinel.raskell.io/issues/new?template=new-agent.yml" class="btn btn-secondary btn-sm">
                            Get Listed
                        </a>
                    </div>
                </article>
            </div>
        </details>

        {# Create Your Own Agent CTA - Collapsible #}
        <details class="create-agent-details" open>
            <summary class="create-agent-summary">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"/></svg>
                <span>Create Your Own Agent</span>
                <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>
            </summary>
            <div class="create-agent-content">
                <p>
                    Extend Sentinel with custom security logic, authentication, rate limiting, or any HTTP processing you need.
                    Agents are external processes that communicate with Sentinel over Unix sockets using a simple length-prefixed JSON protocol.
                </p>

                {# How Agents Work #}
                <div class="agent-explainer">
                    <h3>How Agents Work</h3>
                    <div class="explainer-grid">
                        <div class="explainer-item">
                            <div class="explainer-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>
                            </div>
                            <div class="explainer-content">
                                <strong>Isolated Execution</strong>
                                <span>Agents run as separate processes, providing security isolation and independent deployment</span>
                            </div>
                        </div>
                        <div class="explainer-item">
                            <div class="explainer-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6Z"/></svg>
                            </div>
                            <div class="explainer-content">
                                <strong>Event-Driven</strong>
                                <span>Receive request headers, body chunks, and response events as they flow through the proxy</span>
                            </div>
                        </div>
                        <div class="explainer-item">
                            <div class="explainer-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/></svg>
                            </div>
                            <div class="explainer-content">
                                <strong>Decision Control</strong>
                                <span>Allow, block, redirect, or challenge requests. Modify headers and attach audit metadata</span>
                            </div>
                        </div>
                        <div class="explainer-item">
                            <div class="explainer-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="m10 13-2 2 2 2"/><path d="m14 17 2-2-2-2"/></svg>
                            </div>
                            <div class="explainer-content">
                                <strong>Any Language</strong>
                                <span>Write agents in your preferred language using our official SDKs or implement the protocol directly</span>
                            </div>
                        </div>
                    </div>
                </div>

                {# SDK Cards #}
                <h3>Official SDKs</h3>
                <p class="sdk-intro">Choose the SDK for your preferred language. Each provides a simple, idiomatic API for building agents.</p>
                <div class="sdk-grid">
                    <a href="https://github.com/raskell-io/sentinel-agent-rust-sdk" class="sdk-card" target="_blank" rel="noopener">
                        <div class="sdk-header">
                            <div class="sdk-logo rust">
                                {# Devicon Rust #}
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 128 128" fill="currentColor"><path d="M62.271 10.880c.992-.224 1.984-.16 2.976.032.608 2.048 1.344 4.064 1.792 6.144.992.096 1.984.224 2.976.384.864-1.888 1.728-3.776 2.624-5.664 1.6.416 3.104 1.056 4.544 1.824.128 2.144.256 4.288.32 6.432.928.384 1.856.8 2.752 1.248 1.344-1.568 2.72-3.104 4.096-4.64 1.44.864 2.752 1.888 3.968 3.04-.544 2.048-1.12 4.096-1.728 6.112.8.64 1.568 1.312 2.304 2.016 1.728-1.152 3.488-2.272 5.248-3.392 1.152 1.248 2.176 2.592 3.072 4.032-1.152 1.76-2.336 3.488-3.552 5.216.576.832 1.12 1.696 1.632 2.592 1.984-.608 3.968-1.184 5.984-1.728.736 1.504 1.344 3.072 1.824 4.672-1.696 1.28-3.424 2.528-5.152 3.744.288.928.544 1.888.768 2.848 2.080.032 4.16.096 6.24.192.224 1.568.32 3.168.288 4.768-2.048.672-4.096 1.312-6.144 1.92.032.96.032 1.952 0 2.944 2.016.768 4.032 1.568 6.048 2.368-.128 1.568-.384 3.136-.768 4.672-2.112.096-4.224.16-6.336.192-.256.928-.544 1.856-.864 2.752 1.792 1.344 3.584 2.72 5.344 4.128-.608 1.472-1.344 2.912-2.176 4.288-2.016-.512-4-1.056-5.984-1.632-.512.8-1.056 1.568-1.632 2.336 1.312 1.76 2.592 3.552 3.872 5.344-1.024 1.248-2.144 2.432-3.328 3.52-1.824-1.12-3.616-2.272-5.408-3.456-.704.64-1.44 1.248-2.208 1.824.704 2.016 1.376 4.032 2.048 6.08-1.312.928-2.688 1.76-4.128 2.496-1.44-1.568-2.848-3.168-4.256-4.768-.832.416-1.696.8-2.56 1.152.032 2.144.032 4.288.032 6.432-1.536.48-3.104.832-4.704 1.056-1.024-1.856-2.016-3.744-2.976-5.632-.928.128-1.856.224-2.784.288-.544 2.048-1.088 4.096-1.664 6.144-1.6-.032-3.2-.192-4.768-.48-.384-2.08-.736-4.16-1.056-6.24-.928-.128-1.856-.288-2.752-.48-1.056 1.824-2.144 3.616-3.232 5.408-1.472-.544-2.912-1.216-4.288-1.984.32-2.112.672-4.224 1.056-6.304-.832-.416-1.632-.864-2.432-1.344-1.536 1.472-3.104 2.912-4.672 4.352-1.28-.96-2.496-2.016-3.616-3.168.928-1.888 1.888-3.776 2.88-5.632-.64-.672-1.248-1.376-1.824-2.112-1.888 1.024-3.776 2.016-5.696 2.976-.928-1.28-1.76-2.624-2.464-4.032 1.504-1.536 3.04-3.04 4.608-4.512-.416-.8-.8-1.632-1.152-2.464-2.048.416-4.064.8-6.112 1.152-.48-1.504-.832-3.04-1.056-4.608 1.952-.96 3.904-1.888 5.888-2.784-.096-.896-.16-1.792-.192-2.688-2.048-.288-4.096-.544-6.144-.768-.032-1.568.064-3.136.288-4.672 2.080-.256 4.16-.48 6.24-.672.128-.928.288-1.824.48-2.72-1.92-.96-3.808-1.952-5.696-2.976.416-1.504.96-2.976 1.6-4.416 2.048.352 4.064.736 6.08 1.152.352-.832.736-1.632 1.152-2.432-1.568-1.504-3.104-3.04-4.64-4.576.896-1.312 1.888-2.56 2.976-3.712 1.888 1.024 3.744 2.08 5.6 3.168.576-.672 1.184-1.312 1.824-1.92-1.024-1.888-2.016-3.776-2.976-5.696 1.216-1.056 2.528-2.016 3.904-2.88 1.568 1.504 3.104 3.04 4.608 4.608.768-.48 1.536-.928 2.336-1.344-.352-2.048-.672-4.096-.96-6.144 1.44-.672 2.944-1.216 4.48-1.664.992 1.824 1.952 3.68 2.88 5.536.896-.224 1.792-.416 2.688-.576-.256-2.08-.48-4.16-.672-6.24zm-6.464 36.096c-6.976 2.112-12.48 8.416-13.344 15.68-.864 6.176 1.6 12.576 6.24 16.736 4.768 4.512 11.872 6.176 18.144 4.448 6.272-1.632 11.52-6.464 13.504-12.576 2.144-6.272.576-13.44-4.032-18.272-4.672-5.152-12.256-7.36-18.976-5.984-.544.128-1.056.256-1.536.384zm-.384 7.2c4.128-1.696 9.152-1.056 12.672 1.696 3.648 2.72 5.536 7.392 4.8 11.84-.576 4.192-3.36 7.968-7.168 9.792-3.904 1.952-8.8 1.632-12.416-.864-3.744-2.496-5.856-7.104-5.344-11.552.448-4.736 3.616-9.024 8.032-10.688z"/></svg>
                            </div>
                            <div class="sdk-info">
                                <span class="sdk-name">Rust SDK</span>
                                <span class="sdk-package">sentinel-agent-sdk</span>
                            </div>
                        </div>
                        <p class="sdk-description">Native performance with zero-cost abstractions. Uses the same protocol crate as Sentinel itself.</p>
                        <div class="sdk-footer">
                            <span class="sdk-install">cargo add sentinel-agent-sdk</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
                        </div>
                    </a>

                    <a href="https://github.com/raskell-io/sentinel-agent-go-sdk" class="sdk-card" target="_blank" rel="noopener">
                        <div class="sdk-header">
                            <div class="sdk-logo go">
                                {# Devicon Go #}
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 128 128" fill="currentColor"><path d="M99.617 47.643c-.476-.318-1.023-.637-1.182-.955-.159-.397.238-.715.556-1.112.874-.874 1.589-1.827 1.589-3.019 0-1.271-.556-2.304-1.43-3.178-.715-.715-1.589-1.271-2.304-1.907-.318-.238-.715-.556-.795-.874-.159-.477.238-.795.477-1.112.795-.795 1.668-1.589 2.145-2.622.397-.954.318-2.066-.159-3.019-.556-1.033-1.43-1.827-2.384-2.463-1.192-.795-2.463-1.351-3.814-1.668-2.066-.477-4.211-.636-6.357-.636H63.361c-.715 0-1.271.556-1.271 1.271v46.098c0 .715.556 1.271 1.271 1.271h22.598c1.986 0 4.053-.159 5.96-.636 1.827-.477 3.575-1.192 5.005-2.384 1.51-1.192 2.543-2.86 2.702-4.767.08-1.033-.08-2.066-.397-3.019-.318-.715-.715-1.351-1.192-1.907-.318-.477-.795-.874-1.271-1.192-.318-.238-.715-.477-.874-.795-.159-.397.159-.715.477-1.033.477-.397 1.033-.715 1.43-1.192.795-.795 1.271-1.748 1.43-2.781.238-1.43-.08-2.86-.795-4.053-.318-.636-.795-1.192-1.351-1.668l.001-.002zm-14.895-3.417H73.124v-8.025h12.075c1.351 0 2.702.318 3.655 1.271.477.477.795 1.112.795 1.827.08.795-.159 1.589-.636 2.225-.954 1.509-2.781 2.702-4.291 2.702zm1.748 17.062H73.124v-9.058h13.267c1.112 0 2.304.238 3.178.874.795.556 1.351 1.351 1.43 2.304.08.954-.159 1.907-.715 2.702-1.033 1.827-2.94 3.178-4.804 3.178zM30.334 67.252c-5.801 0-11.124-2.463-14.895-6.357-3.734-3.894-6.277-9.139-6.277-14.782 0-6.038 2.622-11.6 6.754-15.493 3.734-3.575 8.66-5.801 14.179-5.801 5.96 0 11.283 2.622 15.017 6.674 3.575 3.814 5.96 8.978 5.96 14.62 0 5.96-2.543 11.362-6.516 15.176-3.894 3.735-9.058 5.963-14.222 5.963zm-.318-35.947c-4.132 0-7.945 1.668-10.726 4.37-2.702 2.622-4.45 6.277-4.45 10.329 0 4.132 1.748 7.786 4.529 10.488 2.702 2.702 6.516 4.37 10.647 4.37 4.053 0 7.707-1.668 10.329-4.291 2.702-2.702 4.37-6.436 4.37-10.567 0-4.053-1.589-7.707-4.212-10.409-2.701-2.702-6.434-4.29-10.487-4.29z"/></svg>
                            </div>
                            <div class="sdk-info">
                                <span class="sdk-name">Go SDK</span>
                                <span class="sdk-package">sentinel-agent-sdk</span>
                            </div>
                        </div>
                        <p class="sdk-description">Idiomatic Go with goroutine-per-connection model. Simple, fast, and production-ready.</p>
                        <div class="sdk-footer">
                            <span class="sdk-install">go get github.com/raskell-io/sentinel-agent-go-sdk</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
                        </div>
                    </a>

                    <a href="https://github.com/raskell-io/sentinel-agent-python-sdk" class="sdk-card" target="_blank" rel="noopener">
                        <div class="sdk-header">
                            <div class="sdk-logo python">
                                {# Devicon Python #}
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 128 128" fill="currentColor"><path d="M63.391 1.988c-4.222.02-8.252.379-11.8 1.007-10.45 1.846-12.346 5.71-12.346 12.837v9.411h24.693v3.137H29.977c-7.176 0-13.46 4.313-15.426 12.521-2.268 9.405-2.368 15.275 0 25.096 1.755 7.311 5.947 12.519 13.124 12.519h8.491V67.234c0-8.151 7.051-15.34 15.426-15.34h24.665c6.866 0 12.346-5.654 12.346-12.548V15.833c0-6.693-5.646-11.72-12.346-12.837-4.244-.706-8.645-1.027-12.866-1.008zM50.037 9.557c2.55 0 4.634 2.117 4.634 4.721 0 2.593-2.083 4.69-4.634 4.69-2.56 0-4.633-2.097-4.633-4.69-.001-2.604 2.073-4.721 4.633-4.721z"/><path d="M91.682 28.38v10.966c0 8.5-7.208 15.655-15.426 15.655H51.591c-6.756 0-12.346 5.783-12.346 12.549v23.515c0 6.691 5.818 10.628 12.346 12.547 7.816 2.297 15.312 2.713 24.665 0 6.216-1.801 12.346-5.423 12.346-12.547v-9.412H63.938v-3.138h37.012c7.176 0 9.852-5.005 12.348-12.519 2.578-7.735 2.467-15.174 0-25.096-1.774-7.145-5.161-12.521-12.348-12.521h-9.268zM77.809 87.927c2.561 0 4.634 2.097 4.634 4.692 0 2.602-2.074 4.719-4.634 4.719-2.55 0-4.633-2.117-4.633-4.719 0-2.595 2.083-4.692 4.633-4.692z"/></svg>
                            </div>
                            <div class="sdk-info">
                                <span class="sdk-name">Python SDK</span>
                                <span class="sdk-package">sentinel-agent-sdk</span>
                            </div>
                        </div>
                        <p class="sdk-description">Async-first design with asyncio. Fluent Decision builder and typed configuration support.</p>
                        <div class="sdk-footer">
                            <span class="sdk-install">pip install sentinel-agent-sdk</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
                        </div>
                    </a>

                    <a href="https://github.com/raskell-io/sentinel-agent-typescript-sdk" class="sdk-card" target="_blank" rel="noopener">
                        <div class="sdk-header">
                            <div class="sdk-logo typescript">
                                {# Devicon TypeScript #}
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 128 128" fill="currentColor"><path d="M2 63.91v62.5h125v-125H2zm100.73-5a15.56 15.56 0 017.82 4.5 20.58 20.58 0 013 4c0 .16-5.4 3.81-8.69 5.85-.12.08-.6-.44-1.13-1.23a7.09 7.09 0 00-5.87-3.53c-3.79-.26-6.23 1.73-6.21 5a4.58 4.58 0 00.54 2.34c.83 1.73 2.38 2.76 7.24 4.86 8.95 3.85 12.78 6.39 15.16 10 2.66 4 3.25 10.46 1.45 15.24-2 5.2-6.9 8.73-13.83 9.9a38.32 38.32 0 01-9.52-.1A23 23 0 0180 109.19c-1.15-1.27-3.39-4.58-3.25-4.82a9.34 9.34 0 011.15-.73l4.6-2.64 3.59-2.08.75 1.11a16.78 16.78 0 004.74 4.54c4 2.1 9.46 1.81 12.16-.62a5.43 5.43 0 00.69-6.92c-1-1.39-3-2.56-8.59-5-6.45-2.78-9.23-4.5-11.77-7.24a16.48 16.48 0 01-3.43-6.25 25 25 0 01-.22-8c1.33-6.23 6-10.58 12.82-11.87a31.66 31.66 0 019.49.26zm-29.34 5.24v5.12H57.16v46.23H45.65V69.26H29.38v-5a49.19 49.19 0 01.14-5.16c.06-.08 10-.12 22-.1h21.81z"/></svg>
                            </div>
                            <div class="sdk-info">
                                <span class="sdk-name">TypeScript SDK</span>
                                <span class="sdk-package">@sentinel-proxy/agent-sdk</span>
                            </div>
                        </div>
                        <p class="sdk-description">Full type safety with TypeScript. Works with Node.js, Deno, and Bun runtimes.</p>
                        <div class="sdk-footer">
                            <span class="sdk-install">npm install @sentinel-proxy/agent-sdk</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
                        </div>
                    </a>
                </div>

                {# Getting Started Steps #}
                <h3>Quick Start</h3>
                <div class="cta-steps">
                    <div class="cta-step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>Install an SDK</strong>
                            <span>Choose your preferred language and install the SDK using your package manager</span>
                        </div>
                    </div>
                    <div class="cta-step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>Implement your agent</strong>
                            <span>Create an agent class that handles <code>on_request</code> and returns a decision (allow, block, redirect)</span>
                        </div>
                    </div>
                    <div class="cta-step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>Configure Sentinel</strong>
                            <span>Add your agent to the Sentinel config with a Unix socket path and attach it to routes via filters</span>
                        </div>
                    </div>
                    <div class="cta-step">
                        <span class="step-number">4</span>
                        <div class="step-content">
                            <strong>Run and test</strong>
                            <span>Start your agent, reload Sentinel, and verify your logic with test requests</span>
                        </div>
                    </div>
                </div>

                {# Code Example #}
                <h3>Example: Block Admin Paths</h3>
                <div class="code-example">
                    <div class="code-tabs">
                        <button class="code-tab active" data-lang="rust">Rust</button>
                        <button class="code-tab" data-lang="go">Go</button>
                        <button class="code-tab" data-lang="python">Python</button>
                        <button class="code-tab" data-lang="typescript">TypeScript</button>
                    </div>
                    <div class="code-panels">
                        <pre class="code-panel active" data-lang="rust"><code>use sentinel_agent_sdk::{Agent, Decision, Request};

struct MyAgent;

impl Agent for MyAgent {
    async fn on_request(&amp;self, req: &amp;Request) -&gt; Decision {
        if req.path().starts_with("/admin") {
            Decision::deny()
                .with_body("Access denied")
                .with_tag("blocked")
        } else {
            Decision::allow()
        }
    }
}</code></pre>
                        <pre class="code-panel" data-lang="go"><code>package main

import "github.com/raskell-io/sentinel-agent-go-sdk/agent"

type MyAgent struct{}

func (a *MyAgent) OnRequest(req *agent.Request) *agent.Decision {
    if strings.HasPrefix(req.Path(), "/admin") {
        return agent.Deny().
            WithBody("Access denied").
            WithTag("blocked")
    }
    return agent.Allow()
}</code></pre>
                        <pre class="code-panel" data-lang="python"><code>from sentinel_agent_sdk import Agent, Decision, Request

class MyAgent(Agent):
    @property
    def name(self) -> str:
        return "my-agent"

    async def on_request(self, request: Request) -> Decision:
        if request.path_starts_with("/admin"):
            return Decision.deny().with_body("Access denied").with_tag("blocked")
        return Decision.allow()</code></pre>
                        <pre class="code-panel" data-lang="typescript"><code>import { Agent, Decision, Request } from '@sentinel-proxy/agent-sdk';

class MyAgent extends Agent {
    name = 'my-agent';

    async onRequest(request: Request): Promise&lt;Decision&gt; {
        if (request.path.startsWith('/admin')) {
            return Decision.deny()
                .withBody('Access denied')
                .withTag('blocked');
        }
        return Decision.allow();
    }
}</code></pre>
                    </div>
                </div>

                {# Sentinel Configuration #}
                <h3>Sentinel Configuration</h3>
                <p>Configure Sentinel to connect to your agent:</p>
                <pre class="config-example"><code>agents {
    agent "my-agent" type="custom" {
        unix-socket path="/tmp/my-agent.sock"
        events "request_headers"
        timeout-ms 100
        failure-mode "open"
    }
}

filters {
    filter "my-filter" {
        type "agent"
        agent "my-agent"
    }
}

routes {
    route "api" {
        matches { path-prefix "/api/" }
        upstream "backend"
        filters "my-filter"
    }
}</code></pre>

                <div class="cta-actions">
                    <a href="https://github.com/raskell-io/sentinel/tree/main/agents/echo" class="btn btn-primary" target="_blank" rel="noopener">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></svg>
                        Reference: Echo Agent
                    </a>
                    <a href="https://crates.io/crates/sentinel-agent-protocol" class="btn btn-secondary" target="_blank" rel="noopener">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                        Protocol Spec
                    </a>
                    <a href="https://github.com/raskell-io/sentinel.raskell.io/issues/new?template=new-agent.yml" class="btn btn-ghost">
                        Submit Your Agent
                    </a>
                </div>
            </div>
        </details>
    </div>
</section>

<script>
(function() {
    // Agent search functionality
    const searchInput = document.getElementById('agent-search');
    const agentCards = document.querySelectorAll('.agent-card[data-agent-name]');
    const categories = document.querySelectorAll('.agents-category');

    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();

        agentCards.forEach(card => {
            const name = card.dataset.agentName || '';
            const description = card.dataset.agentDescription || '';
            const tags = card.dataset.agentTags || '';

            const matches = query === '' ||
                name.includes(query) ||
                description.includes(query) ||
                tags.includes(query);

            card.style.display = matches ? '' : 'none';
        });

        // Update category counts and visibility
        categories.forEach(category => {
            const grid = category.querySelector('.agents-grid');
            if (!grid) return;

            const visibleCards = grid.querySelectorAll('.agent-card[data-agent-name]:not([style*="display: none"])');
            const countEl = category.querySelector('.agent-count');

            if (countEl) {
                const count = visibleCards.length;
                countEl.textContent = count + (count === 1 ? ' agent' : ' agents');
            }

            // Keep categories expanded when searching
            if (query !== '' && visibleCards.length > 0) {
                category.open = true;
            }
        });
    });

    // Code example tabs
    const codeTabs = document.querySelectorAll('.code-tab');
    const codePanels = document.querySelectorAll('.code-panel');

    codeTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const lang = this.dataset.lang;

            // Update active tab
            codeTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            // Update active panel
            codePanels.forEach(panel => {
                panel.classList.toggle('active', panel.dataset.lang === lang);
            });
        });
    });
})();
</script>
{% endblock %}
